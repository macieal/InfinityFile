<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>InfinityFiles</title>
</head>
<body>
<h1>InfinityFiles</h1>
<p style="color:red;font-weight:bold">⚠️ Os arquivos enviados são temporários e serão apagados após 24h.</p>


<form id="uploadForm">
<input type="file" id="fileInput" name="file" required>
<button>Enviar</button>
</form>


<h2>Arquivos</h2>
<div id="posts"></div>


<script>
async function load() {
const r = await fetch('/api/posts');
const posts = await r.json();
const box = document.getElementById('posts');
box.innerHTML = '';


posts.forEach(p => {
const el = document.createElement('div');
el.innerHTML = `<a href="/uploads/${p.filename}" target="_blank">${p.filename}</a>`;
box.appendChild(el);
});
}


uploadForm.onsubmit = async (e) => {
e.preventDefault();
const fd = new FormData();
fd.append('file', fileInput.files[0]);
await fetch('/api/upload', { method:'POST', body:fd });
fileInput.value = '';
load();
};


load();
</script>


</body>
</html>